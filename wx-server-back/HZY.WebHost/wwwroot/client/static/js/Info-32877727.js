var V=Object.defineProperty;var y=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var j=(n,r,i)=>r in n?V(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,L=(n,r)=>{for(var i in r||(r={}))B.call(r,i)&&j(n,i,r[i]);if(y)for(var i of y(r))E.call(r,i)&&j(n,i,r[i]);return n};import{p as x,t as p,y as P,aU as R,_ as M,b as W,r as q,o as z,c as d,j as D,x as G,w as o,f as t,h as l,g as O,v as S,m as v,q as H,s as J,e as K}from"./index-7474c45c.js";import{w as Q}from"./wxContactService-57bf9565.js";const c="admin/WxTimedTask";var k={findList(n,r,i={}){return x(`${c}/findList/${n}/${r}`,i,!1)},deleteList(n){return console.log(n),n&&n.length===0?p.message("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u6570\u636E!","\u8B66\u544A"):x(`${c}/deleteList`,n,!1)},findForm(n){return P(`${c}/findForm${n?"/"+n:""}`)},saveForm(n){return x(`${c}/saveForm`,n)},exportExcel(n){return R(`${c}/exportExcel`,n)}};const X=n=>(H("data-v-e549bec0"),n=n(),J(),n),Y=v("\u63D0\u4EA4"),Z=v("\u5173\u95ED"),ee=v("\u6587\u672C\u5185\u5BB9"),te=v("\u65B0\u95FB\u54A8\u8BE2"),oe=v("\u6545\u4E8B\u5927\u5168"),ae=v("\u571F\u5473\u60C5\u8BDD"),ne=v("\u7B11\u8BDD\u5927\u5168"),le=v("HTTP\u8BF7\u6C42"),se=v("\u6587\u672C"),me=v("\u56FE\u7247"),re=X(()=>K("a",{target:"_blank",href:"https://www.bejson.com/othertools/cron/"},"\u751F\u6210cron",-1)),ie={emits:["onSuccess"],setup(n,{expose:r,emit:i}){const C=W(),e=q({vm:{id:"",form:{}},visible:!1,saveLoading:!1,wxContactList:[]}),g={findForm(){e.saveLoading=!0,k.findForm(e.vm.id).then(m=>{e.saveLoading=!1,m.code==1&&(e.vm=m.data,e.vm.receivingObjects==null&&(e.vm.receivingObjects=[]))})},saveForm(){if(!e.vm.receivingObjects||!e.vm.receivingObjects.length>0)return p.message("\u63A5\u6536\u5BF9\u8C61\u5FC5\u586B!","\u8B66\u544A");if(!e.vm.form.sendTime)return p.message("\u53D1\u9001\u65F6\u95F4\u5FC5\u586B!","\u8B66\u544A");if(!e.vm.form.sendType)return p.message("\u53D1\u9001\u7C7B\u578B\u5FC5\u586B!","\u8B66\u544A");if(!e.vm.form.messageType)return p.message("\u53D1\u9001\u7C7B\u578B\u5FC5\u586B!","\u8B66\u544A");e.vm.form.applicationToken=C.getApplicationToken(),e.vm.form.receivingObjectWxId=e.vm.receivingObjects.map(m=>m.value).join(","),e.vm.form.receivingObjectName=e.vm.receivingObjects.map(m=>m.label).join(","),e.saveLoading=!0,k.saveForm(e.vm.form).then(m=>{e.saveLoading=!1,m.code==1&&(p.message("\u64CD\u4F5C\u6210\u529F!","\u6210\u529F"),i("onSuccess",m.data),e.visible=!1)})},openForm({visible:m,key:a}){e.visible=m,m&&(e.vm.id=a,g.findForm())},loadContactList(){Q.findAll().then(m=>{m.data&&(e.wxContactList=m.data.map(a=>({value:a.wxId,label:a.alias?a.alias:a.name,key:a.wxId})))})}};return r(L({},g)),z(()=>{g.loadContactList()}),(m,a)=>{const w=d("a-button"),T=d("a-select"),u=d("a-form-item"),f=d("a-col"),_=d("a-select-option"),h=d("a-radio"),F=d("a-radio-group"),I=d("a-textarea"),b=d("a-input"),U=d("a-row"),$=d("a-form"),N=d("a-spin"),A=d("a-modal");return D(),G(A,{visible:l(e).visible,"onUpdate:visible":a[9]||(a[9]=s=>l(e).visible=s),title:l(e).vm.id?"\u7F16\u8F91":"\u65B0\u5EFA",centered:"",onOk:a[10]||(a[10]=s=>l(e).visible=!1),width:600},{footer:o(()=>[t(w,{type:"primary",onClick:a[0]||(a[0]=s=>g.saveForm()),loading:l(e).saveLoading},{default:o(()=>[Y]),_:1},8,["loading"]),t(w,{type:"danger",ghost:"",onClick:a[1]||(a[1]=s=>l(e).visible=!1),class:"ml-15"},{default:o(()=>[Z]),_:1})]),default:o(()=>[t(N,{spinning:l(e).saveLoading},{default:o(()=>[t($,{layout:"vertical",model:l(e).vm.form},{default:o(()=>[t(U,{gutter:[15,15]},{default:o(()=>[t(f,{xs:24,sm:24,md:24,lg:24,xl:24},{default:o(()=>[t(u,{label:"\u63A5\u6536\u5BF9\u8C61",name:"receivingObjects"},{default:o(()=>[t(T,{value:l(e).vm.receivingObjects,"onUpdate:value":a[2]||(a[2]=s=>l(e).vm.receivingObjects=s),mode:"multiple",style:{width:"100%"},labelInValue:!0,showArrow:!0,placeholder:"\u8BF7\u9009\u62E9\u63A5\u6536\u5BF9\u8C61",options:l(e).wxContactList,optionFilterProp:"label"},null,8,["value","options"])]),_:1})]),_:1}),t(f,{xs:24,sm:24,md:24,lg:24,xl:24},{default:o(()=>[t(u,{label:"\u53D1\u9001\u7C7B\u578B"},{default:o(()=>[t(T,{placeholder:"\u8BF7\u9009\u62E9 \u53D1\u9001\u7C7B\u578B",value:l(e).vm.form.sendType,"onUpdate:value":a[3]||(a[3]=s=>l(e).vm.form.sendType=s),style:{width:"200px"}},{default:o(()=>[t(_,{value:1},{default:o(()=>[ee]),_:1}),t(_,{value:2},{default:o(()=>[te]),_:1}),t(_,{value:3},{default:o(()=>[oe]),_:1}),t(_,{value:4},{default:o(()=>[ae]),_:1}),t(_,{value:5},{default:o(()=>[ne]),_:1}),t(_,{value:6},{default:o(()=>[le]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),t(f,{xs:24,sm:24,md:24,lg:24,xl:24},{default:o(()=>[t(u,{label:"\u6D88\u606F\u7C7B\u578B"},{default:o(()=>[t(F,{value:l(e).vm.form.messageType,"onUpdate:value":a[4]||(a[4]=s=>l(e).vm.form.messageType=s),name:"messageType"},{default:o(()=>[t(h,{value:1},{default:o(()=>[se]),_:1}),t(h,{value:2},{default:o(()=>[me]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),O(t(f,{xs:24,sm:24,md:24,lg:24,xl:24},{default:o(()=>[t(u,{label:"\u53D1\u9001\u5185\u5BB9(\u53D1\u9001\u7C7B\u578B\u4E3A\u6587\u672C\u65F6\u751F\u6548)"},{default:o(()=>[t(I,{value:l(e).vm.form.sendContent,"onUpdate:value":a[5]||(a[5]=s=>l(e).vm.form.sendContent=s),placeholder:"\u8BF7\u8F93\u5165 \u53D1\u9001\u5185\u5BB9(\u53D1\u9001\u7C7B\u578B\u4E3A\u6587\u672C\u65F6\u751F\u6548)",rows:8},null,8,["value"])]),_:1})]),_:1},512),[[S,l(e).vm.form.sendType==1]]),O(t(f,{xs:24,sm:24,md:24,lg:24,xl:24},{default:o(()=>[t(u,{label:"http\u8BF7\u6C42url(\u53EA\u652F\u6301GET\u8BF7\u6C42)",name:"httpSendUrl"},{default:o(()=>[t(b,{value:l(e).vm.form.httpSendUrl,"onUpdate:value":a[6]||(a[6]=s=>l(e).vm.form.httpSendUrl=s),placeholder:"\u8BF7\u8F93\u5165 http\u8BF7\u6C42url"},null,8,["value"])]),_:1})]),_:1},512),[[S,l(e).vm.form.sendType==6]]),t(f,{xs:24,sm:24,md:24,lg:24,xl:24},{default:o(()=>[t(u,{label:"\u53D1\u9001\u65F6\u95F4(cron\u8868\u8FBE\u5F0F)",name:"sendTime"},{default:o(()=>[t(b,{value:l(e).vm.form.sendTime,"onUpdate:value":a[7]||(a[7]=s=>l(e).vm.form.sendTime=s),placeholder:"\u8BF7\u8F93\u5165 \u53D1\u9001\u65F6\u95F4(cron\u8868\u8FBE\u5F0F)"},null,8,["value"]),re]),_:1})]),_:1}),t(f,{xs:24,sm:24,md:24,lg:24,xl:24},{default:o(()=>[t(u,{label:"\u7ED3\u5C3E\u5907\u6CE8",name:"closingRemarks"},{default:o(()=>[t(b,{value:l(e).vm.form.closingRemarks,"onUpdate:value":a[8]||(a[8]=s=>l(e).vm.form.closingRemarks=s),placeholder:"\u8BF7\u8F93\u5165 \u7ED3\u5C3E\u5907\u6CE8"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])]),_:1},8,["visible","title"])}}};var de=M(ie,[["__scopeId","data-v-e549bec0"]]),_e=Object.freeze(Object.defineProperty({__proto__:null,default:de},Symbol.toStringTag,{value:"Module"}));export{de as I,_e as a,k as s};
