var N=Object.defineProperty;var T=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var j=(a,r,m)=>r in a?N(a,r,{enumerable:!0,configurable:!0,writable:!0,value:m}):a[r]=m,y=(a,r)=>{for(var m in r||(r={}))A.call(r,m)&&j(a,m,r[m]);if(T)for(var m of T(r))V.call(r,m)&&j(a,m,r[m]);return a};import{p as x,t as _,s as B,aU as E,_ as P,b as R,r as M,o as W,c as d,j as q,q as z,w as n,f as t,l,K as L,L as O,n as v,g as D,h as G,e as H}from"./index-997773e6.js";import{w as K}from"./wxContactService-2773ffd1.js";const c="admin/WxTimedTask";var S={findList(a,r,m={}){return x(`${c}/findList/${a}/${r}`,m,!1)},deleteList(a){return console.log(a),a&&a.length===0?_.message("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u6570\u636E!","\u8B66\u544A"):x(`${c}/deleteList`,a,!1)},findForm(a){return B(`${c}/findForm${a?"/"+a:""}`)},saveForm(a){return x(`${c}/saveForm`,a)},exportExcel(a){return E(`${c}/exportExcel`,a)}};const J=a=>(D("data-v-26bfb278"),a=a(),G(),a),Q=v("\u63D0\u4EA4"),X=v("\u5173\u95ED"),Y=v("\u6587\u672C\u5185\u5BB9"),Z=v("\u65B0\u95FB\u54A8\u8BE2"),ee=v("\u6545\u4E8B\u5927\u5168"),te=v("\u571F\u5473\u60C5\u8BDD"),oe=v("\u7B11\u8BDD\u5927\u5168"),ae=v("HTTP\u8BF7\u6C42"),ne=J(()=>H("a",{target:"_blank",href:"https://www.bejson.com/othertools/cron/"},"\u751F\u6210cron",-1)),le={emits:["onSuccess"],setup(a,{expose:r,emit:m}){const k=R(),e=M({vm:{id:"",form:{}},visible:!1,saveLoading:!1,wxContactList:[]}),g={findForm(){e.saveLoading=!0,S.findForm(e.vm.id).then(s=>{e.saveLoading=!1,s.code==1&&(e.vm=s.data,e.vm.receivingObjects==null&&(e.vm.receivingObjects=[]))})},saveForm(){if(console.log(e.vm.form.sendType),!e.vm.receivingObjects||!e.vm.receivingObjects.length>0)return _.message("\u63A5\u6536\u5BF9\u8C61\u5FC5\u586B!","\u8B66\u544A");if(!e.vm.form.sendTime)return _.message("\u53D1\u9001\u65F6\u95F4\u5FC5\u586B!","\u8B66\u544A");if(!e.vm.form.sendType)return _.message("\u53D1\u9001\u7C7B\u578B\u5FC5\u586B!","\u8B66\u544A");e.vm.form.applicationToken=k.getApplicationToken(),e.vm.form.receivingObjectWxId=e.vm.receivingObjects.map(s=>s.value).join(","),e.vm.form.receivingObjectName=e.vm.receivingObjects.map(s=>s.label).join(","),e.saveLoading=!0,S.saveForm(e.vm.form).then(s=>{e.saveLoading=!1,s.code==1&&(_.message("\u64CD\u4F5C\u6210\u529F!","\u6210\u529F"),m("onSuccess",s.data),e.visible=!1)})},openForm({visible:s,key:o}){e.visible=s,s&&(e.vm.id=o,g.findForm())},loadContactList(){K.findAll().then(s=>{s.data&&(e.wxContactList=s.data.map(o=>({value:o.wxId,label:o.alias?o.alias:o.name,key:o.wxId})))})}};return r(y({},g)),W(()=>{g.loadContactList()}),(s,o)=>{const w=d("a-button"),h=d("a-select"),u=d("a-form-item"),f=d("a-col"),p=d("a-select-option"),C=d("a-textarea"),b=d("a-input"),F=d("a-row"),I=d("a-form"),$=d("a-spin"),U=d("a-modal");return q(),z(U,{visible:l(e).visible,"onUpdate:visible":o[8]||(o[8]=i=>l(e).visible=i),title:l(e).vm.id?"\u7F16\u8F91":"\u65B0\u5EFA",centered:"",onOk:o[9]||(o[9]=i=>l(e).visible=!1),width:600},{footer:n(()=>[t(w,{type:"primary",onClick:o[0]||(o[0]=i=>g.saveForm()),loading:l(e).saveLoading},{default:n(()=>[Q]),_:1},8,["loading"]),t(w,{type:"danger",ghost:"",onClick:o[1]||(o[1]=i=>l(e).visible=!1),class:"ml-15"},{default:n(()=>[X]),_:1})]),default:n(()=>[t($,{spinning:l(e).saveLoading},{default:n(()=>[t(I,{layout:"vertical",model:l(e).vm.form},{default:n(()=>[t(F,{gutter:[15,15]},{default:n(()=>[t(f,{xs:24,sm:24,md:24,lg:24,xl:24},{default:n(()=>[t(u,{label:"\u63A5\u6536\u5BF9\u8C61",name:"receivingObjects"},{default:n(()=>[t(h,{value:l(e).vm.receivingObjects,"onUpdate:value":o[2]||(o[2]=i=>l(e).vm.receivingObjects=i),mode:"multiple",style:{width:"100%"},labelInValue:!0,showArrow:!0,placeholder:"\u8BF7\u9009\u62E9\u63A5\u6536\u5BF9\u8C61",options:l(e).wxContactList,optionFilterProp:"label"},null,8,["value","options"])]),_:1})]),_:1}),t(f,{xs:24,sm:24,md:24,lg:24,xl:24},{default:n(()=>[t(u,{label:"\u53D1\u9001\u7C7B\u578B"},{default:n(()=>[t(h,{placeholder:"\u8BF7\u9009\u62E9 \u53D1\u9001\u7C7B\u578B",value:l(e).vm.form.sendType,"onUpdate:value":o[3]||(o[3]=i=>l(e).vm.form.sendType=i),style:{width:"200px"}},{default:n(()=>[t(p,{value:1},{default:n(()=>[Y]),_:1}),t(p,{value:2},{default:n(()=>[Z]),_:1}),t(p,{value:3},{default:n(()=>[ee]),_:1}),t(p,{value:4},{default:n(()=>[te]),_:1}),t(p,{value:5},{default:n(()=>[oe]),_:1}),t(p,{value:6},{default:n(()=>[ae]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),L(t(f,{xs:24,sm:24,md:24,lg:24,xl:24},{default:n(()=>[t(u,{label:"\u53D1\u9001\u5185\u5BB9(\u53D1\u9001\u7C7B\u578B\u4E3A\u6587\u672C\u65F6\u751F\u6548)"},{default:n(()=>[t(C,{value:l(e).vm.form.sendContent,"onUpdate:value":o[4]||(o[4]=i=>l(e).vm.form.sendContent=i),placeholder:"\u8BF7\u8F93\u5165 \u53D1\u9001\u5185\u5BB9(\u53D1\u9001\u7C7B\u578B\u4E3A\u6587\u672C\u65F6\u751F\u6548)",rows:8},null,8,["value"])]),_:1})]),_:1},512),[[O,l(e).vm.form.sendType==1]]),L(t(f,{xs:24,sm:24,md:24,lg:24,xl:24},{default:n(()=>[t(u,{label:"http\u8BF7\u6C42url(\u53EA\u652F\u6301GET\u8BF7\u6C42)",name:"httpSendUrl"},{default:n(()=>[t(b,{value:l(e).vm.form.httpSendUrl,"onUpdate:value":o[5]||(o[5]=i=>l(e).vm.form.httpSendUrl=i),placeholder:"\u8BF7\u8F93\u5165 http\u8BF7\u6C42url"},null,8,["value"])]),_:1})]),_:1},512),[[O,l(e).vm.form.sendType==6]]),t(f,{xs:24,sm:24,md:24,lg:24,xl:24},{default:n(()=>[t(u,{label:"\u53D1\u9001\u65F6\u95F4(cron\u8868\u8FBE\u5F0F)",name:"sendTime"},{default:n(()=>[t(b,{value:l(e).vm.form.sendTime,"onUpdate:value":o[6]||(o[6]=i=>l(e).vm.form.sendTime=i),placeholder:"\u8BF7\u8F93\u5165 \u53D1\u9001\u65F6\u95F4(cron\u8868\u8FBE\u5F0F)"},null,8,["value"]),ne]),_:1})]),_:1}),t(f,{xs:24,sm:24,md:24,lg:24,xl:24},{default:n(()=>[t(u,{label:"\u7ED3\u5C3E\u5907\u6CE8",name:"closingRemarks"},{default:n(()=>[t(b,{value:l(e).vm.form.closingRemarks,"onUpdate:value":o[7]||(o[7]=i=>l(e).vm.form.closingRemarks=i),placeholder:"\u8BF7\u8F93\u5165 \u7ED3\u5C3E\u5907\u6CE8"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])]),_:1},8,["visible","title"])}}};var se=P(le,[["__scopeId","data-v-26bfb278"]]),de=Object.freeze(Object.defineProperty({__proto__:null,default:se},Symbol.toStringTag,{value:"Module"}));export{se as I,de as a,S as s};
